<dom-module id="my-klas">
  <template>
    <style>

    </style>

    <h1>{{klas.naam}}</h1>
    <template is="dom-repeat" items="[[klas.deStudenten]]">
      <my-student gebruikersnaam="{{item.gebruikersnaam}}">
      </my-student>
    </template>

    <iron-ajax
      id="ajax_klas"
      method="POST"
      url="/klas/info"
      handle-as="json"
      on-response="ajax_klas_handler">
    </iron-ajax>

  </template>

  <script>
    (function() {
      'use strict';

      /* _xxxx private              : geen external data binding      - geen notify
         _c_xx private constant     : geen external binding, constant - geen notify
         c_xx  public constant      : one way external databinding [[c_xx]] - geen notify nodig
         xxxx  public               : two way external databinding {{xxxx}} - notify nodig
      */
      Polymer({
        is: 'my-klas',

        properties: {
          klas: {},
          klascode: {
            type: String
          },
        },

        klas_button_handler: function() {

          this.$.ajax_klas.contentType="application/json";
          this.$.ajax_klas.body={
            "klascode":this.klascode
          };
          this.$.ajax_klas.generateRequest();
        },

        ajax_klas_handler: function(request) {
          this.klas = request.detail.response;

          console.log(this.klas);
        },

        ready: function() {
          this.klas_button_handler();
        },

      });

    })();
  </script>
</dom-module>
